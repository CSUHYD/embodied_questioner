# 第三人称观察器使用指南

## 功能概述

`third_person_observer.py` 是一个交互式的AI2-THOR环境观察器，支持键盘和鼠标双重控制方式，让您可以自由探索虚拟环境。

## 安装依赖

### 方法1：自动安装
```bash
python install_requirements.py
```

### 方法2：手动安装
```bash
pip install opencv-python numpy pyautogui
```

## 运行程序

```bash
python third_person_observer.py
```

## 控制方式

### 键盘控制

#### 移动控制
- **W** - 前进
- **A** - 左转
- **S** - 后退
- **D** - 右转

#### 视角控制
- **8** - 向上看
- **2** - 向下看
- **4** - 向左看
- **6** - 向右看

#### 功能键
- **M** - 切换鼠标控制模式
- **I** - 采集所有物品图片
- **Q** - 退出程序

### 鼠标控制

#### 启用鼠标控制
1. 按 **M** 键开启鼠标控制模式
2. 鼠标光标会自动隐藏
3. 移动鼠标控制视角：
   - 左右移动：控制水平视角
   - 上下移动：控制垂直视角

#### 关闭鼠标控制
- 再次按 **M** 键关闭鼠标控制
- 鼠标光标会重新显示

## 界面说明

程序会显示两个窗口：
1. **AI2-THOR First Person View** - 第一人称视角
2. **AI2-THOR Top-down Camera** - 第三人称俯视视角

## 使用技巧

1. **视角控制**：
   - 使用数字键8246进行精确的视角调整
   - 使用鼠标控制获得更流畅的视角体验

2. **环境探索**：
   - 结合WASD移动和视角控制来全面探索环境
   - 使用第三人称视角获得更好的空间感知

3. **数据采集**：
   - 按I键可以采集当前环境中的所有物品图片
   - 采集过程会在后台进行，不会影响实时控制

## 故障排除

### 鼠标控制不工作
1. 确保已安装pyautogui库：`pip install pyautogui`
2. 检查程序启动时的提示信息
3. 在macOS上可能需要授予辅助功能权限

### 窗口显示问题
1. 确保OpenCV正确安装：`pip install opencv-python`
2. 检查显示器分辨率设置

### 性能问题
1. 降低窗口分辨率（修改代码中的width和height参数）
2. 关闭不必要的渲染选项

## 自定义设置

您可以在代码中修改以下参数：
- 窗口大小：修改`width`和`height`参数
- 鼠标灵敏度：修改`SENSITIVITY`变量
- 移动步长：修改`moveMagnitude`参数
- 视角调整角度：修改`degrees`参数

## 注意事项

1. 鼠标控制开启时，鼠标会被锁定到窗口中心
2. 程序会自动处理鼠标位置重置，无需手动操作
3. 视角范围有限制（垂直视角限制在-60到60度之间）
4. 建议在稳定的环境中运行，避免频繁的窗口切换 